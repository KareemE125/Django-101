{% extends "shared/base.html" %}
{% load static %}
{% block content %}
<main class="main-layout">
    <link rel="stylesheet" href="{% static "styles/postSideBar.css" %}">
    <link rel="stylesheet" href="{% static "styles/postCard.css" %}">

    <section class="sideBar">
        <h3>Browse Categories</h3><br>
        <ul>
            <li><a href="{% url "posts" %}?{% if request.GET.ba %}ba={{ request.GET.ba }}{% endif %}&bc=all">All</a></li>
            {% for cat in categories %}
            <li><a href="{% url "posts" %}?{% if request.GET.ba %}ba={{ request.GET.ba }}&{% endif %}bc={{ cat.name }}">{{ cat.name }}</a></li>
            {% endfor %}
        </ul>
        <br><br>
        <h3>Browse Authors</h3><br>
        <ul>
            <li><a href="{% url "posts" %}?{% if request.GET.bc %}bc={{ request.GET.bc }}{% endif %}&ba=all">All</a></li>
            {% for author in authors %}
            <li><a href="{% url "posts" %}?{% if request.GET.bc %}bc={{ request.GET.bc }}&{% endif %}ba={{ author.name }}">{{ author.name }}</a></li>
            {% endfor %}
        </ul>
    </section>
    

    <section>
        <h2>Posts List</h2>
        <section class="card-list">
            {% if not posts  %}
                <p>Not Results Found for the applied filters</p>
            {% endif %}
            {% for post in posts %}
                {% if not post.isDeleted %}
                    <div class="card" onclick="window.location='{% url "post" post.id %}'">
                            <div class="header">
                                <h3 >{{ post.title }}</h3>
                                <span>Created At: {{ post.createdAt }}</span>
                            </div>
                            <div class="body">
                                <p>{{ post.content }}</p>
                                <div class="img-container">
                                    {% if post.images %}
                                        <img src="{{post.images.url}}" alt="Post's Image">
                                    {% endif %}
                                </div>
                            </div>
                            <div class="footer">
                                <span> <strong>BY ::</strong>  {{ post.author }}</span>
                                <div>
                                    <a href="{% url "edit-post" post.id %}">  <strong>Edit</strong> </a>
                                    <a href="{% url "delete-post" post.id %}">  <strong>Delete</strong> </a>
                                </div>
                            </div>
                    </div>
                {% endif %}
            {% endfor %}
        </section>
    </section>
</main>
{% endblock content %}

